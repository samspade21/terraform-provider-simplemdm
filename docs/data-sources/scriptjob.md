---
page_title: "simplemdm_scriptjob Data Source - terraform-provider-simplemdm"
subcategory: ""
description: |-
  Retrieves information about a script job execution in SimpleMDM including status and device results.
---

# simplemdm_scriptjob (Data Source)

Retrieves information about a script job execution in SimpleMDM. This data source provides read-only access to script job details including execution status, device results, and output data.

## Example Usage

### Basic Example

```terraform
data "simplemdm_scriptjob" "check_job" {
  id = "123456"
}

output "job_status" {
  value = data.simplemdm_scriptjob.check_job.status
}
```

### Advanced Example - Query Job Details

```terraform
data "simplemdm_scriptjob" "inventory_job" {
  id = "123456"
}

output "job_details" {
  value = {
    job_name       = data.simplemdm_scriptjob.inventory_job.job_name
    script_name    = data.simplemdm_scriptjob.inventory_job.script_name
    status         = data.simplemdm_scriptjob.inventory_job.status
    success_count  = data.simplemdm_scriptjob.inventory_job.success_count
    errored_count  = data.simplemdm_scriptjob.inventory_job.errored_count
    pending_count  = data.simplemdm_scriptjob.inventory_job.pending_count
    created_at     = data.simplemdm_scriptjob.inventory_job.created_at
    created_by     = data.simplemdm_scriptjob.inventory_job.created_by
  }
}
```

### Advanced Example - Monitor Job Completion

```terraform
data "simplemdm_scriptjob" "monitor" {
  id = "123456"
}

locals {
  total_devices = (
    data.simplemdm_scriptjob.monitor.success_count +
    data.simplemdm_scriptjob.monitor.errored_count +
    data.simplemdm_scriptjob.monitor.pending_count
  )
  
  completion_rate = local.total_devices > 0 ? (
    (data.simplemdm_scriptjob.monitor.success_count * 100.0) / local.total_devices
  ) : 0
}

output "job_progress" {
  value = {
    status          = data.simplemdm_scriptjob.monitor.status
    completion_rate = "${local.completion_rate}%"
    succeeded       = data.simplemdm_scriptjob.monitor.success_count
    failed          = data.simplemdm_scriptjob.monitor.errored_count
    pending         = data.simplemdm_scriptjob.monitor.pending_count
  }
}
```

### Advanced Example - Extract Device Results

```terraform
data "simplemdm_scriptjob" "results" {
  id = "123456"
}

output "device_results" {
  value = {
    for device in data.simplemdm_scriptjob.results.devices :
    device.id => {
      status      = device.status
      status_code = device.status_code
      response    = device.response
    }
  }
}
```

### Advanced Example - Find Failed Devices

```terraform
data "simplemdm_scriptjob" "audit" {
  id = "123456"
}

locals {
  failed_devices = [
    for device in data.simplemdm_scriptjob.audit.devices :
    device if device.status == "error"
  ]
}

output "failed_devices" {
  value = {
    count = length(local.failed_devices)
    devices = [
      for device in local.failed_devices : {
        device_id   = device.id
        status_code = device.status_code
        error       = device.response
      }
    ]
  }
}
```

### Advanced Example - Check Custom Attribute Output

```terraform
data "simplemdm_scriptjob" "with_output" {
  id = "123456"
}

output "custom_attribute_config" {
  value = {
    attribute = data.simplemdm_scriptjob.with_output.custom_attribute
    regex     = data.simplemdm_scriptjob.with_output.custom_attribute_regex
    stored    = data.simplemdm_scriptjob.with_output.custom_attribute != ""
  }
}
```

### Advanced Example - Job Success Validation

```terraform
data "simplemdm_scriptjob" "validate" {
  id = "123456"
}

locals {
  all_succeeded = (
    data.simplemdm_scriptjob.validate.success_count > 0 &&
    data.simplemdm_scriptjob.validate.errored_count == 0 &&
    data.simplemdm_scriptjob.validate.pending_count == 0
  )
}

output "job_validation" {
  value = local.all_succeeded ? 
          "Job completed successfully on all devices" : 
          "Job has failures or pending devices"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `id` (String) The ID of the script job.

### Read-Only

- `content` (String) Script contents that were executed by the job.
- `created_at` (String) Creation timestamp returned by the API.
- `created_by` (String) User or API key that created the job.
- `custom_attribute` (String) Custom attribute that stores the job output, when configured.
- `custom_attribute_regex` (String) Regular expression used to filter the custom attribute output.
- `devices` (Attributes List) Execution results for each targeted device. (see [below for nested schema](#nestedatt--devices))
- `errored_count` (Number) Number of devices that failed to execute the script.
- `job_identifier` (String) Identifier reported by the SimpleMDM API for the job.
- `job_name` (String) Human friendly name of the job.
- `pending_count` (Number) Number of devices that have not yet reported a result.
- `script_name` (String) Name of the script that was executed.
- `status` (String) Current execution status of the job.
- `success_count` (Number) Number of devices that completed successfully.
- `updated_at` (String) Last update timestamp returned by the API.
- `variable_support` (Boolean) Indicates whether the script supports variables.

<a id="nestedatt--devices"></a>
### Nested Schema for `devices`

Read-Only:

- `id` (String) Device identifier.
- `response` (String) Output returned by the device, when available.
- `status` (String) Execution status reported for the device.
- `status_code` (String) Optional status code returned by the device.

## Notes

- **Read-Only Access**: This data source provides read-only access to script job information.
- **Job Status**: Possible status values include `running`, `completed`, `failed`, etc.
- **Device Results**: The `devices` list contains execution results for each targeted device, including output and status.
- **Custom Attributes**: When a job stores output in a custom attribute, the `custom_attribute` and `custom_attribute_regex` fields show the configuration.
- **Count Metrics**: Use `success_count`, `errored_count`, and `pending_count` to monitor job progress.
- **Real-time Updates**: Status information reflects the most recent data from SimpleMDM and updates on each refresh.
- **Script Content**: The `content` attribute contains the script that was executed, useful for audit purposes.
- **Use Cases**:
  - Monitor script job execution status
  - Retrieve device-specific results and errors
  - Validate job completion
  - Extract custom attribute output
  - Audit script execution history
  - Generate execution reports
  - Troubleshoot failed executions