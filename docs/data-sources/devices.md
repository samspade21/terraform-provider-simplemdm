---
page_title: "simplemdm_devices Data Source - terraform-provider-simplemdm"
subcategory: ""
description: |-
  Retrieves a collection of devices from SimpleMDM with optional filtering capabilities.
---

# simplemdm_devices (Data Source)

Retrieves a collection of devices from SimpleMDM. This data source allows you to query multiple devices at once with optional filtering by name or identifier, making it useful for bulk operations and device discovery.

## Example Usage

### Basic Example - All Devices

```terraform
data "simplemdm_devices" "all" {}

output "total_devices" {
  value = length(data.simplemdm_devices.all.devices)
}
```

### Advanced Example - Search by Name

```terraform
data "simplemdm_devices" "macbooks" {
  search = "MacBook"
}

output "macbook_count" {
  value = length(data.simplemdm_devices.macbooks.devices)
}

output "macbook_ids" {
  value = [for device in data.simplemdm_devices.macbooks.devices : device.id]
}
```

### Advanced Example - Include Awaiting Enrollment

```terraform
data "simplemdm_devices" "all_including_pending" {
  include_awaiting_enrollment = true
}

locals {
  enrolled_devices = [
    for device in data.simplemdm_devices.all_including_pending.devices :
    device if device.status == "enrolled"
  ]
  
  pending_devices = [
    for device in data.simplemdm_devices.all_including_pending.devices :
    device if device.status != "enrolled"
  ]
}

output "enrollment_summary" {
  value = {
    enrolled = length(local.enrolled_devices)
    pending  = length(local.pending_devices)
  }
}
```

### Advanced Example - Query Secret Attributes

```terraform
data "simplemdm_devices" "with_secrets" {
  include_secret_custom_attributes = true
}

output "devices_with_secrets" {
  value = [
    for device in data.simplemdm_devices.with_secrets.devices : {
      id   = device.id
      name = device.name
      # Secret attributes will be included in details
    }
  ]
  sensitive = true
}
```

### Advanced Example - Create Script Job for Filtered Devices

```terraform
data "simplemdm_devices" "engineering_macs" {
  search = "ENG-"
}

resource "simplemdm_script" "update_script" {
  name       = "System Update"
  scriptfile = file("${path.module}/scripts/update.sh")
}

resource "simplemdm_scriptjob" "update_engineering" {
  script_id = simplemdm_script.update_script.id
  device_ids = [
    for device in data.simplemdm_devices.engineering_macs.devices :
    device.id
  ]
}
```

### Advanced Example - Device Inventory Report

```terraform
data "simplemdm_devices" "inventory" {
  include_secret_custom_attributes = false
}

output "device_inventory" {
  value = {
    total_devices = length(data.simplemdm_devices.inventory.devices)
    by_status = {
      for status in distinct([for d in data.simplemdm_devices.inventory.devices : d.status]) :
      status => length([for d in data.simplemdm_devices.inventory.devices : d if d.status == status])
    }
    devices = [
      for device in data.simplemdm_devices.inventory.devices : {
        id          = device.id
        name        = device.name
        device_name = device.device_name
        status      = device.status
        group_id    = device.device_group_id
      }
    ]
  }
}
```

### Advanced Example - Filter by Device Group

```terraform
data "simplemdm_devices" "all" {}

locals {
  target_group_id = "123456"
  
  group_devices = [
    for device in data.simplemdm_devices.all.devices :
    device if device.device_group_id == local.target_group_id
  ]
}

output "group_device_count" {
  value = length(local.group_devices)
}
```

### Advanced Example - Extract Device Details

```terraform
data "simplemdm_devices" "detailed" {}

locals {
  devices_with_details = [
    for device in data.simplemdm_devices.detailed.devices : {
      id           = device.id
      name         = device.name
      serial       = lookup(device.details, "serial_number", "N/A")
      model        = lookup(device.details, "model", "N/A")
      os_version   = lookup(device.details, "os_version", "N/A")
      last_seen    = lookup(device.details, "last_seen_at", "N/A")
    }
  ]
}

output "device_details" {
  value = local.devices_with_details
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `include_awaiting_enrollment` (Boolean) Include devices that are still awaiting enrollment in the response. Default: `false`.
- `include_secret_custom_attributes` (Boolean) Request secret custom attribute values from the API. Default: `false`.
- `search` (String) Optional filter to restrict the device results by identifier or name.

### Read-Only

- `devices` (Block List) Collection of device records returned by the API. (see [below for nested schema](#nestedblock--devices))

<a id="nestedblock--devices"></a>
### Nested Schema for `devices`

Read-Only:

- `details` (Map of String) Flattened device attribute payload for additional inspection.
- `device_group_id` (String) Device group identifier for the device.
- `device_name` (String) Hostname reported by the device.
- `id` (String) Device identifier.
- `name` (String) SimpleMDM display name for the device.
- `status` (String) Current enrollment status reported by SimpleMDM.

## Notes

- **Search Functionality**: The `search` parameter filters devices by name or identifier using a case-insensitive partial match.
- **Awaiting Enrollment**: By default, devices that haven't completed enrollment are excluded. Set `include_awaiting_enrollment = true` to include them.
- **Secret Attributes**: Custom attributes marked as "secret" in SimpleMDM are only returned when `include_secret_custom_attributes = true`. Handle these values securely.
- **Device Details**: The `details` map contains all device information returned by SimpleMDM, including:
  - Hardware information (serial number, model, etc.)
  - OS version and build
  - Network information
  - Battery status
  - Last seen timestamp
  - Custom attributes
- **Performance**: Querying all devices may be slow for large deployments. Use the `search` parameter to filter results.
- **Use Cases**:
  - Bulk device operations
  - Device discovery and filtering
  - Inventory reporting
  - Dynamic device targeting for scripts
  - Compliance auditing
  - Device status monitoring