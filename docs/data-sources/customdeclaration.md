---
page_title: "simplemdm_customdeclaration Data Source - terraform-provider-simplemdm"
subcategory: ""
description: |-
  Retrieves information about a Declarative Device Management (DDM) custom declaration in SimpleMDM.
---

# simplemdm_customdeclaration (Data Source)

Retrieves information about a Declarative Device Management (DDM) custom declaration in SimpleMDM. This data source provides read-only access to custom declaration details including configuration, assignments, and metadata.

## Example Usage

### Basic Example

```terraform
data "simplemdm_customdeclaration" "security_policy" {
  id = "123456"
}

output "declaration_name" {
  value = data.simplemdm_customdeclaration.security_policy.name
}
```

### Advanced Example - Query Declaration Details

```terraform
data "simplemdm_customdeclaration" "app_config" {
  id = "123456"
}

output "declaration_details" {
  value = {
    name              = data.simplemdm_customdeclaration.app_config.name
    identifier        = data.simplemdm_customdeclaration.app_config.identifier
    declaration_type  = data.simplemdm_customdeclaration.app_config.declaration_type
    platforms         = data.simplemdm_customdeclaration.app_config.platforms
    active            = data.simplemdm_customdeclaration.app_config.active
    device_count      = data.simplemdm_customdeclaration.app_config.device_count
    attribute_support = data.simplemdm_customdeclaration.app_config.attribute_support
  }
}
```

### Advanced Example - Reference for Device Assignment

```terraform
data "simplemdm_customdeclaration" "compliance" {
  id = "123456"
}

resource "simplemdm_customdeclaration_device_assignment" "assign" {
  custom_declaration_id = data.simplemdm_customdeclaration.compliance.id
  device_id             = "789012"
}
```

### Advanced Example - Extract Configuration Data

```terraform
data "simplemdm_customdeclaration" "settings" {
  id = "123456"
}

locals {
  # Parse the JSON data
  declaration_config = jsondecode(data.simplemdm_customdeclaration.settings.data)
}

output "config_settings" {
  value = local.declaration_config
}
```

### Advanced Example - Multiple Declarations Lookup

```terraform
locals {
  declaration_ids = ["123456", "234567", "345678"]
}

data "simplemdm_customdeclaration" "declarations" {
  for_each = toset(local.declaration_ids)
  id       = each.value
}

output "declarations_summary" {
  value = {
    for id, decl in data.simplemdm_customdeclaration.declarations :
    decl.name => {
      active       = decl.active
      platforms    = decl.platforms
      device_count = decl.device_count
      group_count  = decl.group_count
    }
  }
}
```

### Advanced Example - Conditional Assignment

```terraform
data "simplemdm_customdeclaration" "conditional" {
  id = "123456"
}

# Only assign if declaration is active
resource "simplemdm_customdeclaration_device_assignment" "conditional_assign" {
  count = data.simplemdm_customdeclaration.conditional.active ? 1 : 0
  
  custom_declaration_id = data.simplemdm_customdeclaration.conditional.id
  device_id             = "789012"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `id` (String) ID of the declaration to retrieve.

### Read-Only

- `activation_predicate` (String) Predicate that controls when the declaration activates on a device.
- `active` (Boolean) Whether the declaration is active.
- `attribute_support` (Boolean) Whether variable expansion is enabled for the declaration payload.
- `created_at` (String) Timestamp when the declaration was created in SimpleMDM.
- `data` (String) JSON payload of the declaration data.
- `declaration_type` (String) Declaration type reported to Apple devices.
- `description` (String) Description of the declaration.
- `device_count` (Number) Number of devices currently assigned to the declaration.
- `escape_attributes` (Boolean) Whether custom variable values are escaped before being delivered.
- `group_count` (Number) Number of device groups currently assigned to the declaration.
- `identifier` (String) Unique declaration identifier.
- `name` (String) Human readable name for the declaration.
- `payload` (String) Alias that mirrors the JSON payload returned by the SimpleMDM download endpoint.
- `platforms` (Set of String) List of platforms that receive the declaration.
- `priority` (Number) Priority value used for ordering declarations.
- `profile_identifier` (String) Identifier assigned by SimpleMDM for tracking the declaration profile.
- `topic` (String) Topic used for declarative management payloads.
- `transport` (String) Transport mechanism for the declaration.
- `updated_at` (String) Timestamp when the declaration was last updated in SimpleMDM.
- `user_scope` (Boolean) Whether the declaration is scoped to users (true) or devices (false).

## Notes

- **Read-Only Access**: This data source provides read-only access to declaration information.
- **DDM Support**: Declarative Device Management is supported on iOS 15+, iPadOS 15+, and macOS 13+.
- **Data Payload**: The `data` attribute contains the JSON configuration. Use `jsondecode()` to parse it.
- **Payload vs Data**: Both `payload` and `data` contain the declaration's JSON. They are functionally equivalent.
- **Device/Group Counts**: Reflect current assignments and are updated on each Terraform refresh.
- **Use Cases**:
  - Reference existing declarations for device assignments
  - Query declaration configuration and status
  - Validate declaration settings before assignment
  - Build conditional logic based on declaration properties
  - Audit declaration deployments