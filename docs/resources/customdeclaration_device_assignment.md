---
page_title: "simplemdm_customdeclaration_device_assignment Resource - terraform-provider-simplemdm"
subcategory: ""
description: |-
  Manages the assignment of a custom declaration to a specific SimpleMDM device.
---

# simplemdm_customdeclaration_device_assignment (Resource)

Manages the assignment of a custom declaration to a specific SimpleMDM device. This resource creates a relationship between a Declarative Device Management (DDM) custom declaration and an individual device, allowing targeted deployment of declarations.

## Example Usage

### Basic Example

```terraform
resource "simplemdm_customdeclaration_device_assignment" "assignment" {
  custom_declaration_id = "123456"
  device_id             = "789012"
}
```

### Advanced Example - Multiple Device Assignments

```terraform
resource "simplemdm_customdeclaration" "security_config" {
  name             = "Security Configuration"
  identifier       = "com.example.security"
  declaration_type = "com.apple.configuration.management.properties"
  platforms        = ["iOS", "macOS"]
  
  data = jsonencode({
    ServiceType = "com.apple.mdm"
    SecuritySettings = {
      RequirePasscode = true
    }
  })
}

# Assign to multiple devices
resource "simplemdm_customdeclaration_device_assignment" "device_1" {
  custom_declaration_id = simplemdm_customdeclaration.security_config.id
  device_id             = "123456"
}

resource "simplemdm_customdeclaration_device_assignment" "device_2" {
  custom_declaration_id = simplemdm_customdeclaration.security_config.id
  device_id             = "234567"
}
```

### Advanced Example - Conditional Assignment with Data Source

```terraform
# Query devices to assign declaration to
data "simplemdm_devices" "ios_devices" {
  search = "iPhone"
}

resource "simplemdm_customdeclaration" "ios_config" {
  name             = "iOS Configuration"
  identifier       = "com.example.ios"
  declaration_type = "com.apple.configuration.management.properties"
  platforms        = ["iOS"]
  
  data = jsonencode({
    ServiceType = "com.apple.mdm"
  })
}

# Assign to all found iOS devices
resource "simplemdm_customdeclaration_device_assignment" "ios_assignments" {
  for_each = { for device in data.simplemdm_devices.ios_devices.devices : device.id => device }
  
  custom_declaration_id = simplemdm_customdeclaration.ios_config.id
  device_id             = each.value.id
}
```

### Advanced Example - Lifecycle Management

```terraform
resource "simplemdm_customdeclaration" "test_config" {
  name             = "Test Configuration"
  identifier       = "com.example.test"
  declaration_type = "com.apple.configuration.management.properties"
  platforms        = ["iOS"]
  
  data = jsonencode({
    ServiceType = "com.apple.mdm"
  })
}

resource "simplemdm_customdeclaration_device_assignment" "test_device" {
  custom_declaration_id = simplemdm_customdeclaration.test_config.id
  device_id             = "123456"

  lifecycle {
    create_before_destroy = true
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `custom_declaration_id` (String) Identifier of the custom declaration to assign.
- `device_id` (String) Identifier of the device that should receive the custom declaration.

### Read-Only

- `id` (String) The unique identifier of this assignment in SimpleMDM.

## Import

Import is supported using the following syntax:

```shell
# Custom declaration device assignment can be imported using the format: custom_declaration_id:device_id
terraform import simplemdm_customdeclaration_device_assignment.example 123456:789012
```

## Notes

- **One-to-Many Relationship**: A single custom declaration can be assigned to multiple devices, but each assignment must be managed as a separate resource.
- **Device Requirement**: The device must exist in SimpleMDM before the assignment can be created.
- **Declaration Requirement**: The custom declaration must exist before it can be assigned to a device.
- **Platform Compatibility**: Ensure the device platform matches one of the platforms specified in the custom declaration.
- **Removal**: Destroying this resource removes the declaration assignment from the device but does not delete the declaration or device.
- **Bulk Assignment**: For assigning to many devices, use `for_each` or `count` with a data source query.