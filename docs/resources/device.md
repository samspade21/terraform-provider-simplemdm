---
page_title: "simplemdm_device Resource - terraform-provider-simplemdm"
subcategory: ""
description: |-
  Manages devices in SimpleMDM, including device metadata, group assignments, and profile assignments.
---

# simplemdm_device (Resource)

Manages devices in SimpleMDM. This resource allows you to configure device properties, assign devices to groups, deploy profiles, and set custom attributes. This is useful for pre-configuring device settings before enrollment or managing existing enrolled devices.

## Example Usage

### Basic Example

```terraform
resource "simplemdm_device" "laptop" {
  name        = "Executive Laptop"
  devicegroup = "123456"
}
```

### Advanced Example - Complete Configuration

```terraform
resource "simplemdm_devicegroup" "executives" {
  name = "Executive Devices"
}

resource "simplemdm_customprofile" "vpn" {
  name         = "VPN Configuration"
  mobileconfig = file("${path.module}/profiles/vpn.mobileconfig")
}

resource "simplemdm_device" "exec_macbook" {
  name       = "CEO MacBook Pro"
  devicename = "CEOs-MacBook-Pro"
  devicegroup = simplemdm_devicegroup.executives.id
  
  # Assign profiles
  profiles = [
    "456789",  # Pre-existing profile ID
  ]
  
  customprofiles = [
    simplemdm_customprofile.vpn.id,
  ]
  
  # Set custom attributes
  attributes = {
    department  = "Executive"
    cost_center = "EXEC-001"
    location    = "HQ-Floor3"
  }
}
```

### Advanced Example - Multiple Devices with Attributes

```terraform
resource "simplemdm_attribute" "department" {
  name = "department"
}

resource "simplemdm_attribute" "owner_email" {
  name = "owner_email"
}

locals {
  devices = {
    "sales-1" = {
      name       = "Sales Device 1"
      department = "Sales"
      owner      = "john@example.com"
    }
    "sales-2" = {
      name       = "Sales Device 2"
      department = "Sales"
      owner      = "jane@example.com"
    }
  }
}

resource "simplemdm_device" "sales_devices" {
  for_each = local.devices
  
  name        = each.value.name
  devicename  = each.key
  devicegroup = simplemdm_devicegroup.sales.id
  
  attributes = {
    department  = each.value.department
    owner_email = each.value.owner
  }
}
```

### Advanced Example - Pre-enrollment Configuration

```terraform
# Create a device before enrollment to pre-configure settings
resource "simplemdm_device" "new_hire" {
  name        = "New Hire - Engineering"
  devicegroup = simplemdm_devicegroup.engineering.id
  
  customprofiles = [
    simplemdm_customprofile.wifi.id,
    simplemdm_customprofile.vpn.id,
  ]
  
  attributes = {
    department  = "Engineering"
    hire_date   = "2024-01-15"
    asset_owner = "IT Department"
  }
}

# Output the enrollment URL
output "enrollment_url" {
  value       = simplemdm_device.new_hire.enrollmenturl
  sensitive   = true
  description = "Enrollment URL for new hire device"
}
```

### Advanced Example - Using Device Details

```terraform
resource "simplemdm_device" "monitored" {
  name        = "Monitored Device"
  devicegroup = "123456"
  
  attributes = {
    monitoring = "enabled"
  }
}

# Access device details after enrollment
output "device_info" {
  value = {
    id            = simplemdm_device.monitored.id
    serial_number = lookup(simplemdm_device.monitored.details, "serial_number", "N/A")
    model         = lookup(simplemdm_device.monitored.details, "model", "N/A")
    os_version    = lookup(simplemdm_device.monitored.details, "os_version", "N/A")
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `devicegroup` (String) The ID of the device group where the device will be assigned.
- `name` (String) The SimpleMDM name of the device.

### Optional

- `attributes` (Map of String) Map of custom attribute names to values for this device.
- `customprofiles` (Set of String) List of custom configuration profile IDs assigned to this device.
- `devicename` (String) The device name (local hostname) of the device.
- `profiles` (Set of String) List of configuration profile IDs assigned to this device.

### Read-Only

- `details` (Map of String) Full set of attributes returned by the SimpleMDM device record.
- `enrollmenturl` (String) SimpleMDM enrollment URL generated when a new device is created via API.
- `id` (String) The unique identifier of the device in SimpleMDM.

## Import

Import is supported using the following syntax:

```shell
# Device can be imported by specifying the device ID
terraform import simplemdm_device.example 123456
```

## Notes

- **Pre-enrollment**: You can create a device resource before actual device enrollment to pre-configure settings. The `enrollmenturl` will be generated upon creation.
- **Enrollment URL**: The `enrollmenturl` attribute is only populated when creating a new device. It is not available for imported or already-enrolled devices.
- **Device Details**: The `details` map contains all device information returned by SimpleMDM, including serial number, model, OS version, and more. This is populated after the device enrolls.
- **Profile Assignment**: Both `profiles` (built-in profiles) and `customprofiles` (custom profiles) can be assigned directly to devices.
- **Attribute Override**: Device-level attributes override group-level and global default values.
- **Device Name vs SimpleMDM Name**: 
  - `name` is the display name in SimpleMDM
  - `devicename` is the local hostname of the device
- **Group Requirement**: Every device must be assigned to a device group.