---
page_title: "simplemdm_device_command Resource - terraform-provider-simplemdm"
subcategory: ""
description: |-
  Executes one-time management commands against SimpleMDM devices for actions like locking, wiping, or restarting.
---

# simplemdm_device_command (Resource)

Executes one-time management commands against SimpleMDM devices. This resource is designed for immediate actions like device locking, remote wiping, password rotation, or system commands. Each resource creation triggers a single command execution.

**Note**: This is a one-shot resource. Creating the resource executes the command immediately. The resource does not maintain ongoing state and is primarily useful in automation workflows.

## Example Usage

### Basic Example - Lock Device

```terraform
resource "simplemdm_device_command" "lock_device" {
  device_id = "123456"
  command   = "lock"
}
```

### Advanced Example - Lock with Message

```terraform
resource "simplemdm_device_command" "lock_with_message" {
  device_id = "123456"
  command   = "lock"
  
  parameters = {
    message      = "This device has been locked by IT. Contact helpdesk@example.com"
    phone_number = "+15555551234"
  }
}
```

### Advanced Example - Remote Wipe

```terraform
resource "simplemdm_device_command" "wipe_device" {
  device_id = "789012"
  command   = "wipe"
  
  parameters = {
    pin = "123456"  # Required for wipe command
  }
}
```

### Advanced Example - Restart Device

```terraform
resource "simplemdm_device_command" "restart" {
  device_id = "123456"
  command   = "restart"
}
```

### Advanced Example - Push Apps

```terraform
resource "simplemdm_device_command" "push_apps" {
  device_id = "123456"
  command   = "push_assigned_apps"
}
```

### Advanced Example - Rotate FileVault Key

```terraform
resource "simplemdm_device_command" "rotate_filevault" {
  device_id = "123456"
  command   = "rotate_filevault_recovery_key"
}
```

### Advanced Example - Set Time Zone

```terraform
resource "simplemdm_device_command" "set_timezone" {
  device_id = "123456"
  command   = "set_time_zone"
  
  parameters = {
    time_zone = "America/Los_Angeles"
  }
}
```

### Advanced Example - Conditional Execution

```terraform
data "simplemdm_device" "target" {
  id = "123456"
}

# Only lock if device is enrolled
resource "simplemdm_device_command" "conditional_lock" {
  count = lookup(data.simplemdm_device.target.details, "status", "") == "enrolled" ? 1 : 0
  
  device_id = data.simplemdm_device.target.id
  command   = "lock"
}
```

### Advanced Example - Lifecycle Management

```terraform
# Command that should not be recreated on every apply
resource "simplemdm_device_command" "initial_setup" {
  device_id = "123456"
  command   = "push_assigned_apps"
  
  lifecycle {
    ignore_changes = all
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `command` (String) Command to execute. Supported values: `push_assigned_apps`, `refresh`, `restart`, `shutdown`, `lock`, `clear_passcode`, `clear_firmware_password`, `rotate_firmware_password`, `clear_recovery_lock_password`, `clear_restrictions_password`, `rotate_recovery_lock_password`, `rotate_filevault_recovery_key`, `set_admin_password`, `rotate_admin_password`, `wipe`, `update_os`, `enable_remote_desktop`, `disable_remote_desktop`, `enable_bluetooth`, `disable_bluetooth`, `set_time_zone`, `unenroll`, `delete_user`.
- `device_id` (String) Identifier of the target device.

### Optional

- `parameters` (Map of String) Optional parameters to pass to the API call. Required parameters vary by command.

### Read-Only

- `id` (String) Internal identifier for the executed command.
- `response` (String) Raw response payload, if any, returned by the API.
- `status_code` (Number) HTTP status code returned by the SimpleMDM API.

## Import

Import is not supported for this resource as it represents one-time command executions.

## Notes

- **One-Shot Nature**: This resource executes a command once upon creation. It does not maintain ongoing state.
- **Idempotency**: Creating the same command multiple times will execute it multiple times. Use lifecycle rules or conditional logic if needed.
- **Command Parameters**: Some commands require specific parameters:
  - `lock`: Optional `message` and `phone_number`
  - `wipe`: Required `pin` parameter
  - `set_time_zone`: Required `time_zone` parameter
  - `set_admin_password`: Required `password` parameter
- **Platform Support**: Not all commands are supported on all device types (iOS, macOS, tvOS). Refer to SimpleMDM documentation.
- **Async Execution**: Commands are queued and executed asynchronously by the device. The resource completes when the command is sent, not when it's executed.
- **Error Handling**: Check the `status_code` and `response` attributes for command execution results.
- **Security**: Commands like `wipe` are destructive. Use with caution and appropriate safeguards.
- **Lifecycle Best Practices**: Use `lifecycle { ignore_changes = all }` to prevent command re-execution on every apply.

## Available Commands

### Device Management
- `push_assigned_apps` - Push all assigned apps to the device
- `refresh` - Refresh device inventory
- `restart` - Restart the device
- `shutdown` - Shutdown the device
- `unenroll` - Remove device from MDM management

### Security
- `lock` - Lock the device
- `clear_passcode` - Clear device passcode
- `clear_firmware_password` - Clear firmware password (Mac)
- `rotate_firmware_password` - Rotate firmware password (Mac)
- `clear_recovery_lock_password` - Clear recovery lock password
- `rotate_recovery_lock_password` - Rotate recovery lock password
- `rotate_filevault_recovery_key` - Rotate FileVault recovery key (Mac)
- `clear_restrictions_password` - Clear restrictions password

### User Management
- `set_admin_password` - Set admin user password (Mac)
- `rotate_admin_password` - Rotate admin password (Mac)
- `delete_user` - Delete user account (Mac)

### System Configuration
- `update_os` - Trigger OS update
- `enable_remote_desktop` - Enable remote desktop (Mac)
- `disable_remote_desktop` - Disable remote desktop (Mac)
- `enable_bluetooth` - Enable Bluetooth
- `disable_bluetooth` - Disable Bluetooth
- `set_time_zone` - Set device time zone

### Data Management
- `wipe` - Wipe all data from device (requires PIN)