---
page_title: "simplemdm_customprofile Resource - terraform-provider-simplemdm"
subcategory: ""
description: |-
  Manages custom configuration profiles in SimpleMDM for deploying custom settings to devices.
---

# simplemdm_customprofile (Resource)

Manages custom configuration profiles in SimpleMDM. Custom profiles allow you to deploy custom settings, restrictions, and configurations to managed devices using Apple's configuration profile format (.mobileconfig files).

## Example Usage

### Basic Example

```terraform
resource "simplemdm_customprofile" "wifi_config" {
  name         = "Corporate WiFi"
  mobileconfig = file("${path.module}/profiles/wifi.mobileconfig")
  userscope    = false
}
```

### Advanced Example - From File

```terraform
resource "simplemdm_customprofile" "vpn_profile" {
  name                   = "Company VPN"
  mobileconfig           = file("${path.module}/profiles/vpn.mobileconfig")
  userscope              = true
  attributesupport       = false
  escapeattributes       = false
  reinstallafterosupdate = false
}
```

### Advanced Example - Using templatefile

```terraform
resource "simplemdm_customprofile" "dynamic_config" {
  name         = "Dynamic Configuration"
  mobileconfig = templatefile("${path.module}/profiles/config.mobileconfig", {
    server_url = "https://api.example.com"
    port       = 8443
  })
  userscope = false
}
```

### Advanced Example - Inline Profile

```terraform
resource "simplemdm_customprofile" "inline_profile" {
  name = "Inline Configuration"
  mobileconfig = <<-EOT
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PayloadIdentifier</key>
    <string>com.example.config</string>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadUUID</key>
    <string>12345678-1234-1234-1234-123456789012</string>
    <key>PayloadVersion</key>
    <integer>1</integer>
    <key>PayloadDisplayName</key>
    <string>Example Configuration</string>
    <key>PayloadContent</key>
    <array>
        <dict>
            <key>PayloadType</key>
            <string>com.apple.SystemConfiguration</string>
            <key>PayloadIdentifier</key>
            <string>com.example.config.system</string>
        </dict>
    </array>
</dict>
</plist>
EOT
  userscope = false
}
```

### Advanced Example - With Variable Support

```terraform
resource "simplemdm_attribute" "company_name" {
  name          = "company_name"
  default_value = "Acme Corp"
}

resource "simplemdm_customprofile" "variable_profile" {
  name             = "Company Branded Profile"
  attributesupport = true
  escapeattributes = true
  
  mobileconfig = templatefile("${path.module}/profiles/branded.mobileconfig", {
    company_variable = "$company_name"  # SimpleMDM will replace this
  })
}
```

### Advanced Example - macOS Profile with Reinstall

```terraform
resource "simplemdm_customprofile" "macos_settings" {
  name                   = "macOS System Settings"
  mobileconfig           = file("${path.module}/profiles/macos.mobileconfig")
  userscope              = false  # Device-level profile
  reinstallafterosupdate = true   # Reinstall after OS updates
}
```

### Advanced Example - With Assignment Group

```terraform
resource "simplemdm_customprofile" "security_profile" {
  name         = "Security Configuration"
  mobileconfig = file("${path.module}/profiles/security.mobileconfig")
  userscope    = false
}

resource "simplemdm_assignmentgroup" "secure_devices" {
  name     = "Secure Devices"
  profiles = [simplemdm_customprofile.security_profile.id]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `mobileconfig` (String) The configuration profile content. Can be a string, or loaded using `file()` or `templatefile()` functions. Example: `file("./profiles/profile.mobileconfig")`
- `name` (String) A name for the profile. Example: "Corporate WiFi Configuration"

### Optional

- `attributesupport` (Boolean) When enabled, SimpleMDM will process variables in the uploaded profile. Default: `false`.
- `escapeattributes` (Boolean) When enabled, SimpleMDM escapes the values of custom variables in the uploaded profile. Default: `false`.
- `reinstallafterosupdate` (Boolean) When enabled, SimpleMDM will re-install the profile automatically after macOS software updates are detected. Default: `false`.
- `userscope` (Boolean) If false, deploy as a device profile instead of a user profile for macOS devices. Default: `true`.

### Read-Only

- `devicecount` (Number) Number of devices assigned to this custom configuration profile.
- `groupcount` (Number) Number of device groups assigned to this custom configuration profile.
- `id` (String) The unique identifier of the custom configuration profile in SimpleMDM.
- `profileidentifier` (String) Read-only profile identifier assigned by SimpleMDM.
- `profilesha` (String) SHA-256 checksum reported by SimpleMDM for the current mobileconfig payload.

## Import

Import is supported using the following syntax:

```shell
# Custom profile can be imported by specifying the custom profile ID
terraform import simplemdm_customprofile.example 123456
```

## Notes

- **Profile Format**: The `mobileconfig` must be a valid Apple configuration profile in XML plist format.
- **Variable Substitution**: When `attributesupport` is enabled, use `$attribute_name` syntax in your profile to reference SimpleMDM custom attributes.
- **Escaping**: Enable `escapeattributes` when substituting attribute values into XML or special contexts to prevent parsing errors.
- **User vs Device Scope**: 
  - User scope profiles (`userscope = true`) apply per-user on macOS
  - Device scope profiles (`userscope = false`) apply system-wide
  - iOS/iPadOS always use device scope regardless of this setting
- **Reinstall Behavior**: Setting `reinstallafterosupdate = true` is useful for profiles that may be affected by OS updates.
- **Profile Updates**: Changing the `mobileconfig` content will trigger a profile update on assigned devices.
- **Assignment**: Profiles can be assigned to devices via assignment groups or directly to devices using the device resource.